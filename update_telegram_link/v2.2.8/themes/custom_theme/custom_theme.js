define(["exports","jquery","../../windows/windows","text!./custom_theme.html","highstock-release/highstock","color-picker","css!./custom_theme.css"],function(t,e,a,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.init=void 0;var r=l(e),i=l(a),n=l(o);function l(t){return t&&t.__esModule?t:{default:t}}function c(t,o){if(o){o=o.substring(0,o.indexOf(")")+1);var i="",n="";t.split("_").forEach(function(t,e,a){n+="}",i=e!==a.length-1?i+'{"'+t+'":':i+'{"'+t+'":"'+o+'"'}),i+=n,r.default.extend(f,JSON.parse(i))}}var s=[[1452412800,32.87,33.75,32.5,33.28],[1452427200,33.27,34.45,32.81,34.22],[1452441600,34.23,34.73,33.72,33.77],[1452456e3,34.23,34.48,33.73,33.84],[1452470400,33.84,34.42,33.2,33.33],[1452484800,33.34,33.73,32.8,33.55],[1452499200,32.7,33.22,32.56,32.91],[1452513600,32.89,33.38,32.05,32.17],[1452528e3,32.16,32.2,31.21,31.54],[1452542400,30.8,31.87,30.76,31.65],[1452556800,31.66,32.37,30.88,31.09],[1452571200,31.1,31.27,30.38,30.84],[1452585600,31.52,31.84,31.23,31.48]],d=r.default.extend(!0,{},Highcharts.getOptions(),{}),u=null,f={},h=t.init=function(t){t.click(function(){if(u)u.moveToTop();else{var t=(0,r.default)(n.default).i18n();t.find(".color_input_width").each(function(t,a){var o=(0,r.default)(a).attr("id").replace("theme_",""),e=(0,r.default)(a).attr("alpha"),i=p(o);i?(0,r.default)(a).css({background:i}):(i=(0,r.default)(a).css("background-color"),c(o,i),Highcharts.setOptions(f)),(0,r.default)(a).data("prevColor",i),(0,r.default)(a).colorpicker({showOn:"click",position:{my:"left+50 bottom+100",of:"element",collision:"fit"},part:{map:{size:128},bar:{size:128}},alpha:!!e,colorFormat:"RGBA",open:function(t,e){e.colorPicker.setColor((0,r.default)(this).css("background-color"))},select:function(t,e){(0,r.default)(a).css({background:e.formatted}).val(""),c(o,e.formatted),v()},ok:function(t,e){e.formatted&&((0,r.default)(a).css({background:e.formatted}).val(""),(0,r.default)(a).data("prevColor",(0,r.default)(a).css("background-color")),c(o,e.formatted),v())},cancel:function(){(0,r.default)(a).css({background:(0,r.default)(a).data("prevColor")}).val(""),c(o,(0,r.default)(a).data("prevColor")),v()}})}),(u=i.default.createBlankWindow(t,{autoOpen:!1,resizable:!1,collapsable:!1,minimizable:!1,maximizable:!1,closable:!1,closeOnEscape:!1,width:650,height:515,title:"Customize chart appearance".i18n(),modal:!0,destroy:function(){u=null},buttons:{Apply:function(){return require(["themes/themes"],function(t){var e=(0,r.default)("a.theme_custom"),a=e.text(),o=e.attr("theme-name");t.confirmationDialog(Highcharts.getOptions(),o,a)})},Cancel:function(){(0,r.default)(this).dialog("close"),(0,r.default)(this).dialog("destroy"),g()}}})).dialog("open"),m()}})},p=function(t){var e=d;return t.split("_").forEach(function(t){e=e&&e[t]}),e},g=function(){var t=Highcharts.getOptions();for(var e in t)"function"!=typeof t[e]&&delete t[e];Highcharts.setOptions(d)},m=function(){var t={chart:{spacingLeft:0,marginLeft:45},series:[{type:"candlestick",data:s}],navigator:{enabled:!0,series:{id:"navigator"}},title:{text:"Some random index".i18n()},credits:{href:"#",text:""},xAxis:{ordinal:!1},yAxis:[{opposite:!1}],rangeSelector:{enabled:!1},tooltip:{crosshairs:[{width:2,color:"red",dashStyle:"dash"},{width:2,color:"red",dashStyle:"dash"}],enabled:!0,enabledIndicators:!0},exporting:{enabled:!1}};(0,r.default)("#preview-chart").highcharts("StockChart",t)},v=function(){Highcharts.setOptions(f),(0,r.default)("#preview-chart").highcharts().destroy(),m()};t.default={init:h}});