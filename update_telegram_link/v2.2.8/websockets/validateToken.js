define(["exports","websockets/binary_websockets","common/util"],function(e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=(local_storage.get("i18n")||{value:"en"}).value,o=n.socket_url+"?app_id="+n.app_id+"&l="+t;e.default=function(e){return new Promise(function(t,n){var r=new WebSocket(o);r.addEventListener("open",function(){r.send(JSON.stringify({authorize:e}))}),r.addEventListener("close",function(){}),r.addEventListener("message",function(e){var n=JSON.parse(e.data);t(n.authorize),r.close()}),r.addEventListener("error",function(e){return n(e.error)})})}});