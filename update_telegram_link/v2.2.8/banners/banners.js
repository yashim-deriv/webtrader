define(["exports","text!./banners.html","../websockets/binary_websockets","css!banners/banners.css"],function(n,t,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.init=void 0;var i=o(t),a=o(e);function o(n){return n&&n.__esModule?n:{default:n}}var s=n.init=function(){var n=$(i.default).i18n();$("body").find("nav").after(n),document.getElementById("close_banner_btn_iom").href=getDerivUrl(""),l()},l=function(){var _=document.getElementById("close_banner_container");a.default.cached.send({website_status:1}).then(function(n){var f=n.website_status.clients_country;local_storage.get("oauth")?a.default.cached.authorize().then(function(r){var d=local_storage.get("authorize").country;a.default.send({landing_company:d}).then(function(n){var t,e,i,a,o,s,l,c,u=n.landing_company;isEuCountry(d,u)&&(t=r.authorize,e=t.account_list.filter(function(n){return"maltainvest"===n.landing_company_name}).length,i=t.account_list.filter(function(n){return"malta"===n.landing_company_name}).length,a=t.account_list.filter(function(n){return"iom"===n.landing_company_name}).length,o=local_storage.get("authorize").loginid,s=loginids().filter(function(n){return n.id===o}),l=s[0].is_mf,c=s[0].is_virtual,l||c&&e&&!a&&!i)||1==loginids().length&&isEuCountrySelected(f)?_.classList.remove("invisible"):_.classList.add("invisible")})}):a.default.send({landing_company:f}).then(function(n){var t=n.landing_company;isEuCountry(f,t)?_.classList.remove("invisible"):_.classList.add("invisible")})})};a.default.events.on("login",function(){l()}),a.default.events.on("logout",function(){l()}),a.default.events.on("switch_account",function(){l()}),n.default={init:s}});