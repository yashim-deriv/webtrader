define(["exports","jquery","../windows/windows","../websockets/binary_websockets","highstock-release/modules/offline-exporting","highstock-release/highcharts-more","common/util","webtrader-charts"],function(e,t,r,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.addNewWindow=void 0;var i=o(t),d=o(r),a=o(n);function o(e){return e&&e.__esModule?e:{default:e}}local_storage.get("config");WebtraderCharts.init({appId:a.default.app_id,lang:"en",server:a.default.socket_url});var s=e.addNewWindow=function(e){var t=e,r=(0,i.default)("<div/>");e=i.default.extend({title:e.instrumentName,relativePosition:!0,close:function(){a.actions.destroy(),(0,i.default)(this).dialog("destroy").remove()},resize:function(){return a&&a.actions.reflow()},refresh:function(){return a.actions.refresh()},open:function(){(0,i.default)(this);(0,i.default)(this).parent().promise().done(function(){return a.actions.reflow()})}},e);var n=d.default.createBlankWindow(r,e),a=WebtraderCharts.chartWindow.addNewChart(r,t);a.actions.reflow();var o=n.track({module_id:"chartWindow",is_unique:!1,data:a.data()});return a.events.anyChange=function(){return o(a.data())},n.dialog("open"),n};e.default={addNewWindow:s}});