{"version":3,"sources":["../../../../src/tc/tc.es6"],"names":["win","landing_company_name","liveapi","events","on","data","dialog","authorize","is_virtual","cached","send","landing_company_details","name","init","div","html","i18n","find","click","then","window","location","reload","windows","createBlankWindow","title","width","minHeight","height","resizable","collapsable","minimizable","maximizable","closable","modal","closeOnEscape","ignoreTileAction","destroy","appendTo","append","binary_url_tc","getBinaryUrl","Array","from","document","getElementsByClassName","forEach","a_el","href"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AASA,QAAIA,MAAM,IAAV;AAAA,QACIC,uBAAuB,EAD3B;;AAGAC,gCAAQC,MAAR,CAAeC,EAAf,CAAkB,OAAlB;AAAA,8EAA2B,iBAAOC,IAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AACvB,gCAAIL,GAAJ,EAAS;AACLA,oCAAIM,MAAJ,CAAW,SAAX;AACAN,sCAAM,IAAN;AACH;;AAJsB,iCAKnBK,KAAKE,SAAL,CAAeC,UALI;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAAA;AAAA,mCAQeN,4BAAQO,MAAR,CAAeC,IAAf,CAAoB,EAAEC,yBAAyBN,KAAKE,SAAL,CAAeN,oBAA1C,EAApB,CARf;;AAAA;AAQjBU,mDARiB;;AASvBV,mDAAuBU,wBAAwBA,uBAAxB,IAAmDA,wBAAwBA,uBAAxB,CAAgDC,IAA1H;;AATuB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAA3B;;AAAA;AAAA;AAAA;AAAA;;AAYO,QAAMC,sBAAO,SAAPA,IAAO,GAAM;AACtB,YAAIZ,oBAAJ,EAA0B;AACtB,gBAAMa,MAAM,sBAAEC,YAAF,EAAQC,IAAR,EAAZ;AACAF,gBAAIG,IAAJ,CAAS,uBAAT,EAAkCF,IAAlC,CAAuCd,oBAAvC;AACAa,gBAAIG,IAAJ,CAAS,SAAT,EAAoBC,KAApB,CAA0B,YAAM;AAC5BhB,4CAAQQ,IAAR,CAAa,EAAE,gBAAgB,CAAlB,EAAb,EAAoCS,IAApC,CAAyC;AAAA,2BAAKC,OAAOC,QAAP,CAAgBC,MAAhB,EAAL;AAAA,iBAAzC,EAD4B,CAC6C;AACzEtB,oBAAIM,MAAJ,CAAW,SAAX;AACH,aAHD;AAIAN,kBAAMuB,kBAAQC,iBAAR,CAA0B,sBAAE,QAAF,CAA1B,EAAuC;AACzCC,uBAAO,uBAAuBT,IAAvB,EADkC;AAEzCU,uBAAO,GAFkC;AAGzCC,2BAAW,EAH8B;AAIzCC,wBAAQ,GAJiC;AAKzCC,2BAAW,KAL8B;AAMzCC,6BAAa,KAN4B;AAOzCC,6BAAa,KAP4B;AAQzCC,6BAAa,KAR4B;AASzCC,0BAAU,IAT+B;AAUzCC,uBAAO,IAVkC;AAWzCC,+BAAe,KAX0B;AAYzCC,kCAAkB,IAZuB;AAazC,mCAAmB,MAbsB;AAczCC,yBAAS,mBAAM;AACXrC,0BAAM,IAAN;AACH;AAhBwC,aAAvC,CAAN;AAkBAc,gBAAIwB,QAAJ,CAAatC,GAAb;AACA;AACA,kCAAE,MAAF,EAAUuC,MAAV,CAAiBvC,IAAIM,MAAJ,CAAW,QAAX,CAAjB;AACAN,gBAAIM,MAAJ,CAAW,MAAX;AACA,gBAAMkC,gBAAgBC,aAAa,2BAAb,CAAtB;AACAC,kBAAMC,IAAN,CAAWC,SAASC,sBAAT,CAAgC,SAAhC,CAAX,EAAuDC,OAAvD,CAA+D,UAACC,IAAD;AAAA,uBAAUA,KAAKC,IAAL,GAAYR,aAAtB;AAAA,aAA/D;AACH;AACJ,KAjCM;;sBAmCQ;AACX3B;AADW,K","file":"tc.js","sourcesContent":["/**\n * Created by arnab on 5/2/16.\n */\nimport $ from \"jquery\";\nimport windows from \"../windows/windows\";\nimport liveapi from \"../websockets/binary_websockets\";\nimport html from 'text!./tc.html';\nimport 'css!./tc.css';\n\nlet win = null,\n    landing_company_name = '';\n\nliveapi.events.on(\"login\", async (data) => {\n    if (win) {\n        win.dialog('destroy');\n        win = null;\n    }\n    if (data.authorize.is_virtual) {\n        return;\n    }\n    const landing_company_details = await liveapi.cached.send({ landing_company_details: data.authorize.landing_company_name });\n    landing_company_name = landing_company_details.landing_company_details && landing_company_details.landing_company_details.name;\n});\n\nexport const init = () => {\n    if (landing_company_name) {\n        const div = $(html).i18n();\n        div.find('.tc_landing_comp_name').html(landing_company_name);\n        div.find('.button').click(() => {\n            liveapi.send({ \"tnc_approval\": 1 }).then(_ => window.location.reload()); // Reload page to remove previous notification message\n            win.dialog('destroy');\n        });\n        win = windows.createBlankWindow($('<div/>'), {\n            title: 'Terms and Conditions'.i18n(),\n            width: 580,\n            minHeight: 90,\n            height: 220,\n            resizable: false,\n            collapsable: false,\n            minimizable: false,\n            maximizable: false,\n            closable: true,\n            modal: true,\n            closeOnEscape: false,\n            ignoreTileAction: true,\n            'data-authorized': 'true',\n            destroy: () => {\n                win = null;\n            }\n        });\n        div.appendTo(win);\n        //This helps in showing multiple dialog windows in modal form\n        $('body').append(win.dialog('widget'));\n        win.dialog('open');\n        const binary_url_tc = getBinaryUrl('terms-and-conditions.html');\n        Array.from(document.getElementsByClassName('tc-link')).forEach((a_el) => a_el.href = binary_url_tc);\n    }\n}\n\nexport default {\n    init\n};\n\n"]}